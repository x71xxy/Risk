{% extends "base.html" %} {% block title %}我的评估{% endblock %} {% block
content %}
<div class="evaluations-container">
  <div class="evaluations-box">
    <h1>我的评估记录</h1>

    {% if evaluations %}
    <div class="evaluations-list">
      {% for evaluation in evaluations %}
      <div class="evaluation-card">
        <div class="evaluation-header">
          <h3>{{ evaluation.title }}</h3>
          <span class="status-badge {{ evaluation.status }}"
            >{{ evaluation.status }}</span
          >
        </div>

        <div class="evaluation-info">
          <p><strong>类别：</strong>{{ evaluation.category }}</p>
          <p>
            <strong>提交时间：</strong>{{
            evaluation.created_at.strftime('%Y-%m-%d %H:%M') }}
          </p>
          {% if evaluation.estimated_value %}
          <p>
            <strong>估价：</strong>¥{{ "%.2f"|format(evaluation.estimated_value)
            }}
          </p>
          {% endif %}
        </div>

        <div class="evaluation-actions">
          <a
            href="{{ url_for('main.evaluation_detail', evaluation_id=evaluation.id) }}"
            class="btn btn-primary"
            >查看详情</a
          >
          {% if evaluation.status == 'pending' %}
          <button
            onclick="cancelEvaluation({{ evaluation.id }})"
            class="btn btn-danger"
          >
            取消评估
          </button>
          {% endif %}
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
    <div class="no-evaluations">
      <p>暂无评估记录</p>
      <a href="{{ url_for('main.request_evaluation') }}" class="btn btn-primary"
        >开始评估</a
      >
    </div>
    {% endif %}
  </div>
</div>

<style>
  .evaluations-container {
    padding: 2rem;
    max-width: 1200px;
    margin: 0 auto;
  }

  .evaluation-card {
    background: white;
    border-radius: 8px;
    padding: 1.5rem;
    margin-bottom: 1rem;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .evaluation-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
  }

  .status-badge {
    padding: 0.25rem 0.75rem;
    border-radius: 999px;
    font-size: 0.875rem;
  }

  .status-badge.pending {
    background: #fef3c7;
    color: #92400e;
  }

  .evaluation-actions {
    display: flex;
    gap: 1rem;
    margin-top: 1rem;
  }

  .btn {
    padding: 0.5rem 1rem;
    border-radius: 4px;
    cursor: pointer;
    text-decoration: none;
    display: inline-block;
  }

  .btn-primary {
    background: #3b82f6;
    color: white;
  }

  .btn-danger {
    background: #ef4444;
    color: white;
  }
</style>
{% endblock %}
